#### 计算机体系结构和内存层次
##### 内存管理：
    1、抽象
		逻辑地址空间向线性的物理空间的转换
	2、保护
		独立的地址空间
	3、共享
		访问相同的内存空间
	4、虚拟化
		更大的地址空间
		
##### 内存管理方式：
	1、重定位
	2、分段 （数据、代码、堆栈）
	3、分页
	4、虚拟存储
	这些的实现高度依赖硬件。（MMU）

	
##### 连续内存的分配：
	外部碎片：
		分配单元未被使用的内存
	内部碎片：
		分配单元内部未被使用的内存
		取决于分配单元是否要取整
	操作系统要维护两个数据结构：
		已分配的内存区块
		空闲区块
	
	动态分配算法：
		最先匹配
		最佳匹配
		最差匹配
		
##### 碎片整理：
	通过调整进程占用的分区位置来减少或避免分区碎片
	1、碎片紧凑：
		通过移动分配给进程的内存分区，以合并外部碎片。
		条件：所有的应用程序都可动态重定位
	2、分区对换：
		通过抢占并回收处于等待状态的分区，以增大可用内存空间。
##### 伙伴系统(buddy system)：

连续分配的缺点：
	分配给程序的物理内存必须连续
	存在内存碎片
	内存分配的动态修改困难。

##### 非连续分配的需求：
	设计目标：提高内存利用率和管理灵活性。
		1、允许一个程序的使用非连续的物理地址空间
		2、允许共享代码与数据
		3、支持动态加载和动态链接
##### 段式存储管理：
	段地址空间：
		进程的地址空间是由多个段组成，例如：代码段、数据段、堆栈、公共库代码段..
		各个段内内存空间是连续的，各个段之间的内存空间可以不连续。
	逻辑地址：
		段号+offset，通过段表查到段基址。
##### 页式存储管理：
	页表保存了逻辑地址到物理地址的映射关系
	
	产生一个逻辑地址（由两部分组成页号和页内偏移），通过查询页表找到与
    页号对应的帧号，物理地址就是（frame_nums << s + offset）
	
	
    页表结构：
    	每个页面对应一个页表项
    	随进程的运行状态的变换而变化
    	页表基址寄存器
    页表项的组成：
    	帧号：f
    	页表项标志位：
    		存在位
    		修改位
    		引用位
    		
##### 快表（TLB）和多级页表：
    通过缓存和减少页表的数目来减少查询页表时间，以及存储页表的内存。

##### 段页式存储管理：
	在段式存储管理的基础上，给每一段再加上页表。
	内存共享：
		通过指向相同的页表基址，实现进程间的段共享。
	
	